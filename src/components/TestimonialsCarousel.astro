---
const testimonials = [
  {
    author: "A.",
    text: "Plats et boissons travaillés, maison et super bons, brunch super complet, équipe au top et super arrangeante. On a même pu venir avec une poussette. Rien à dire merci à toute l'équipe pour l'accueil !",
  },
  {
    author: "Sonia GUTIERREZ",
    text: "Un lieu qui nous avait été recommandé. Nous avons bien fait de venir. Tout d'abord l'accueil y est parfait, avec de bons conseils. Les plats sont copieux et savoureux. Un vrai bon moment !",
  }
];
const yellow = '#fff1b0';
const bleu = '#363d36';
---

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<section class="py-12 z-10 bg-transparent">
  <div class="container mx-auto px-4">
    <div class="relative max-w-2xl mx-auto min-w-0">
      <div id="carousel-avis" class="overflow-hidden rounded-3xl shadow-xl bg-[#363d36]/95 w-full" style="font-family: 'Poppins', sans-serif;">
        <h2 class="text-2xl md:text-3xl font-bold text-white text-center py-6">Ils parlent de nous</h2>
        <div class="flex w-full flex-nowrap transition-transform duration-500" id="carousel-inner">
          {testimonials.map((t, idx) => (
            <div class={`w-full flex-shrink-0 flex flex-col items-center p-8 ${idx === 0 ? '' : 'hidden'}`} id={`testimonial-${idx}`}> 
              <div class="flex items-center mb-2">
                <span class="text-yellow-400 text-2xl">★★★★★</span>
              </div>
              <p class="text-white text-center text-lg md:text-xl mb-4">
                "{t.text}"
              </p>
              <span class="font-semibold text-[#fff1b0] text-base md:text-lg">{t.author}</span>
            </div>
          ))}
        </div>
      </div>
      <!-- Contrôles carrousel -->
      <div class="flex justify-center mt-6 space-x-4">
        <button aria-label="Avis précédent" id="carousel-prev" class="bg-[#fff1b0] text-[#363d36] rounded-full p-3 md:p-4 shadow hover:bg-white transition focus:outline-none focus:ring-2 focus:ring-[#fff1b0]">
          <svg class="w-6 h-6 md:w-7 md:h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <button aria-label="Avis suivant" id="carousel-next" class="bg-[#fff1b0] text-[#363d36] rounded-full p-3 md:p-4 shadow hover:bg-white transition focus:outline-none focus:ring-2 focus:ring-[#fff1b0]">
          <svg class="w-6 h-6 md:w-7 md:h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg>
        </button>
      </div>
      <div class="text-center mt-8">
        <a href="https://www.google.com/search?sca_esv=8e29119b57fe546f&sxsrf=AE3TifMPHkQRXszin7IdC9daX7w2UOP0GQ:1748285559183&uds=AOm0WdE2fekQnsyfYEw8JPYozOKzd_f15QZoBU42Y19e4AjyRnk38CWFQEtWvING6s0SZTeS9d-7s6eDDpnuzeWmDNAQaTXg0KeuSSYH6ZhNGuDD3q2Ae7Q9CT27OljWY-8HdSxEYdVicEd347Zybs73HoLYo1C-Jg&si=AMgyJEtREmoPL4P1I5IDCfuA8gybfVI2d5Uj7QMwYCZHKDZ-E7-X58SVjXut8qDbG78AtFhCf5wgE3k-ei0oYtHGEqOLgmEP7jVhzuuCPr-zG3MoiFRd7kQ%3D&q=LaBelleBrune+Avis&sa=X&ved=2ahUKEwi_k-Kd58GNAxUYT6QEHdyZN4EQ3PALegQISRAF&biw=1536&bih=703&dpr=1.25" 
           target="_blank" rel="noopener" 
           class="inline-flex items-center px-6 py-3 bg-white text-[#363d36] font-bold rounded-full shadow-lg border-2 border-[#fff1b0] hover:bg-[#fff1b0] hover:text-[#363d36] transition-all duration-300">
          Voir tous les avis sur Google
          <svg class="ml-2 w-5 h-5 text-[#363d36]" fill="currentColor" viewBox="0 0 20 20"><path d="M12.293 3.293a1 1 0 011.414 0l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414-1.414L15.586 10H3a1 1 0 110-2h12.586l-3.293-3.293a1 1 0 010-1.414z"/></svg>
        </a>
      </div>
    </div>
  </div>
</section>

<script type="module">
  const testimonials = [
    {
      author: "A.",
      text: "Plats et boissons travaillés, maison et super bons, brunch super complet, équipe au top et super arrangeante. On a même pu venir avec une poussette. Rien à dire merci à toute l'équipe pour l'accueil !",
    },
    {
      author: "Sonia GUTIERREZ",
      text: "Un lieu qui nous avait été recommandé. Nous avons bien fait de venir. Tout d'abord l'accueil y est parfait, avec de bons conseils. Les plats sont copieux et savoureux. Un vrai bon moment !",
    }
  ];
  let current = 0;
  /** @type {HTMLElement[]} */
  const slides = [];
  /** @type {HTMLElement[]} */
  const dots = [];
  document.addEventListener('DOMContentLoaded', () => {
    for (let i = 0; i < testimonials.length; i++) {
      const slide = document.getElementById(`testimonial-${i}`);
      if (slide) slides.push(slide);
      const dot = document.querySelectorAll('.carousel-dot')[i];
      if (dot) dots.push(dot);
    }
    function showSlide(idx) {
      slides.forEach((slide, i) => {
        if (i === idx) {
          slide.classList.remove('hidden');
        } else {
          slide.classList.add('hidden');
        }
      });
      dots.forEach((dot, i) => {
        if (i === idx) {
          dot.classList.add('bg-yellow-400');
        } else {
          dot.classList.remove('bg-yellow-400');
        }
      });
      current = idx;
    }
    const prevBtn = document.getElementById('carousel-prev');
    const nextBtn = document.getElementById('carousel-next');
    if (prevBtn) prevBtn.onclick = () => showSlide((current - 1 + slides.length) % slides.length);
    if (nextBtn) nextBtn.onclick = () => showSlide((current + 1) % slides.length);
    dots.forEach((dot, i) => {
      dot.onclick = () => showSlide(i);
    });
    showSlide(0);
  });
</script> 
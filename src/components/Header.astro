---
// Header.astro
const menuItems = [
  { text: 'Accueil', href: '/' },
  { text: 'La carte', href: '/carte' }
];
---

<!-- Import Google Fonts Poppins -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<header class="fixed w-full bg-transparent z-50 transition-all duration-300">
  <nav class="container mx-auto px-4 py-4">
    <div class="flex justify-between items-center">
      <!-- Logo -->
      <a href="/" class="text-2xl font-bold text-white flex items-center" aria-label="Accueil La Belle Brune">
        <picture>
          <source srcset="/logo_labellebrune.webp" type="image/webp" />
          <img 
            src="/logo_labellebrune.png" 
            alt="Logo La Belle Brune - Accueil" 
            width="160" height="48"
            class="h-16 md:h-24 w-auto"
            fetchpriority="high"
            decoding="async"
            loading="eager"
          />
        </picture>
      </a>

      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center justify-center flex-1">
        <div class="flex items-center space-x-12">
          {menuItems.map(item => (
            <a 
              href={item.href}
              class="text-gray-200 hover:text-white transition-colors text-2xl font-semibold"
              style="font-family: 'Poppins', sans-serif;"
            >
              {item.text}
            </a>
          ))}
          <div class="flex items-center space-x-4 ml-8">
            <a href="https://www.instagram.com/labellebrune.toulouse" target="_blank" rel="noopener noreferrer" aria-label="Instagram La Belle Brune">
              <svg class="w-7 h-7 text-gray-200 hover:text-pink-500 transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zm4.25 2.25a5.25 5.25 0 1 1 0 10.5a5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5zm5.25 1.25a1 1 0 1 1-2 0a1 1 0 0 1 2 0z"/></svg>
              <span class="sr-only">Instagram La Belle Brune</span>
            </a>
            <a href="https://www.facebook.com/labellebrune.toulouse" target="_blank" rel="noopener noreferrer" aria-label="Facebook La Belle Brune">
              <svg class="w-7 h-7 text-gray-200 hover:text-blue-600 transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.595 0 0 .592 0 1.326v21.348C0 23.408.595 24 1.325 24h11.495v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788c1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.406 24 24 23.408 24 22.674V1.326C24 .592 23.406 0 22.675 0"/></svg>
              <span class="sr-only">Facebook La Belle Brune</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-button"
        class="md:hidden text-gray-200 hover:text-white"
        aria-label="Menu"
      >
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          class="h-6 w-6" 
          fill="none" 
          viewBox="0 0 24 24" 
          stroke="currentColor"
        >
          <path 
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M4 6h16M4 12h16M4 18h16" 
          />
        </svg>
      </button>
    </div>

    <!-- Mobile Menu Plein Ã©cran -->
    <div 
      id="mobile-menu"
      class="fixed inset-0 bg-[#363d36] bg-opacity-100 z-50 flex flex-col items-center justify-center transition-all duration-500 ease-in-out opacity-0 pointer-events-none md:hidden"
      style="font-family: 'Poppins', sans-serif;"
    >
      <button id="close-mobile-menu" class="absolute top-6 right-6 text-white hover:text-yellow-400 text-4xl focus:outline-none" aria-label="Fermer le menu">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      <div class="flex flex-col items-center gap-8">
        <img src="/logo_labellebrune3.png" alt="Logo LaBelleBrune" class="h-24 w-auto mb-6" />
        {menuItems.map(item => (
          <a 
            href={item.href}
            class="text-white hover:text-yellow-400 transition-colors text-3xl font-semibold text-center"
            style="font-family: 'Poppins', sans-serif;"
          >
            {item.text}
          </a>
        ))}
        <div class="flex items-center gap-6 mt-8">
          <a href="https://www.instagram.com/labellebrune.toulouse" target="_blank" rel="noopener noreferrer" aria-label="Instagram La Belle Brune">
            <svg class="w-8 h-8 text-white hover:text-pink-500 transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zm4.25 2.25a5.25 5.25 0 1 1 0 10.5a5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5zm5.25 1.25a1 1 0 1 1-2 0a1 1 0 0 1 2 0z"/></svg>
          </a>
          <a href="https://www.facebook.com/labellebrune.toulouse" target="_blank" rel="noopener noreferrer" aria-label="Facebook La Belle Brune">
            <svg class="w-8 h-8 text-white hover:text-blue-600 transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.595 0 0 .592 0 1.326v21.348C0 23.408.595 24 1.325 24h11.495v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788c1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.406 24 24 23.408 24 22.674V1.326C24 .592 23.406 0 22.675 0"/></svg>
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  #mobile-menu {
    backdrop-filter: blur(0.5px);
  }
  #mobile-menu.open {
    opacity: 1 !important;
    pointer-events: auto !important;
    transition: opacity 0.4s, transform 0.4s;
  }
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0,0,0,0);
    white-space: nowrap;
    border: 0;
  }
</style>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const closeMobileMenu = document.getElementById('close-mobile-menu');

  function openMenu() {
    if (!mobileMenu) return;
    mobileMenu.classList.add('open');
    mobileMenu.classList.remove('opacity-0', 'pointer-events-none');
    document.body.style.overflow = 'hidden';
  }
  function closeMenu() {
    if (!mobileMenu) return;
    mobileMenu.classList.remove('open');
    mobileMenu.classList.add('opacity-0', 'pointer-events-none');
    document.body.style.overflow = '';
  }
  mobileMenuButton?.addEventListener('click', openMenu);
  closeMobileMenu?.addEventListener('click', closeMenu);
  // Fermer le menu au clic sur un lien
  if (mobileMenu) {
    mobileMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', closeMenu);
    });
  }

  // Update header background on scroll
  const header = document.querySelector('header');
  function updateHeader() {
    if (!header) return;
    if (window.scrollY > 50) {
      header.classList.add('bg-[#363d36]', 'backdrop-blur-sm', 'shadow-sm');
      header.classList.remove('bg-transparent');
    } else {
      header.classList.remove('bg-[#363d36]', 'backdrop-blur-sm', 'shadow-sm');
      header.classList.add('bg-transparent');
    }
  }
  updateHeader();
  window.addEventListener('scroll', updateHeader);
</script> 